slideshow_jquery_image_gallery_backend_script=function(){var i=jQuery,e={};return e.isBackendInitialized=!1,e.init=function(){e.isBackendInitialized||(e.isBackendInitialized=!0,i(document).trigger("slideshowBackendReady"))},i(document).ready(e.init),i(window).load(e.init),e}();
slideshow_jquery_image_gallery_backend_script.generalSettings=function(){var e=jQuery,i={};return i.isCurrentPage=!1,i.init=function(){"slideshow_page_general_settings"===window.pagenow&&(i.isCurrentPage=!0,i.activateUserCapabilities())},i.activateUserCapabilities=function(){e("input").change(function(i){var t,a,s,r=e(i.currentTarget),n="slideshow-jquery-image-gallery-add-slideshows",d="slideshow-jquery-image-gallery-edit-slideshows",l="slideshow-jquery-image-gallery-delete-slideshows";"checkbox"==r.attr("type").toLowerCase()&&(t=r.attr("id").split("_"),a=t.shift(),s=t.join("_"),a!==d||r.attr("checked")?(a===n||a===l)&&e("#"+d+"_"+s).attr("checked",!0):(e("#"+n+"_"+s).attr("checked",!1),e("#"+l+"_"+s).attr("checked",!1)))})},e(document).bind("slideshowBackendReady",i.init),i}();
slideshow_jquery_image_gallery_backend_script.generalSettings.customStyles=function(){var e=jQuery,t={};return t.init=function(){slideshow_jquery_image_gallery_backend_script.generalSettings.isCurrentPage&&t.activateNavigation()},t.activateNavigation=function(){e(".nav-tab").click(function(t){var a,i=e(t.currentTarget),r=e(".nav-tab-active");r.removeClass("nav-tab-active"),i.addClass("nav-tab-active"),e(r.attr("href").replace("#",".")).hide(),e(i.attr("href").replace("#",".")).show(),a=e("input[name=_wp_http_referer]"),a.attr("value",a.attr("value").split("#").shift()+i.attr("href"))}),e('a[href="#'+document.URL.split("#").pop()+'"]').trigger("click")},e(document).bind("slideshowBackendReady",t.init),t}();
slideshow_jquery_image_gallery_backend_script.generalSettings.customStyles=function(){var t=jQuery,e={};return e.init=function(){slideshow_jquery_image_gallery_backend_script.generalSettings.isCurrentPage&&(e.activateActionButtons(),e.activateDeleteButtons())},e.activateActionButtons=function(){t(".custom-styles-tab .styles-list .style-action.style-default").click(function(s){var l,i,o,n,a,c=t(s.currentTarget),y=c.closest("li").find(".style-title").html(),u=c.closest("li").find(".style-content").html(),r=window.slideshow_jquery_image_gallery_backend_script_generalSettings,m="slideshow-jquery-image-gallery-custom-styles";"string"!=typeof u||u.length<=0||("object"==typeof r&&("object"==typeof r.localization&&void 0!==r.localization.newCustomizationPrefix&&r.localization.newCustomizationPrefix.length>0&&(y=r.localization.newCustomizationPrefix+" - "+y),"object"==typeof r.data&&void 0!==r.data.customStylesKey&&r.data.customStylesKey.length>0&&(m=r.data.customStylesKey)),l=m+"_"+(e.getHighestCustomStyleID()+1),n=t(".custom-styles-tab .custom-style-templates"),i=n.find(".style-editor").clone(),i.addClass(l),i.find(".new-custom-style-title").attr("value",y),i.find(".new-custom-style-content").html(u),i.find(".new-custom-style-title").attr("name",m+"["+l+"][title]"),i.find(".new-custom-style-content").attr("name",m+"["+l+"][style]"),t(".custom-styles-tab .style-editors").append(i),setTimeout(function(){i.fadeIn(200)},200),o=n.find(".custom-styles-list-item").clone(!0),o.removeClass("custom-styles-list-item"),o.find(".style-title").html(y),o.find(".style-action").addClass(l),o.find(".style-delete").addClass(l),a=t(".custom-styles-tab .styles-list .custom-styles-list"),a.find(".no-custom-styles-found").remove(),a.append(o))}),t(".custom-styles-tab .styles-list .style-action, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-action").click(function(e){var s=t(e.currentTarget).attr("class").split(" ")[1];void 0!==s&&(t(".custom-styles-tab .style-editors .style-editor").each(function(e,s){t(s).fadeOut(200)}),setTimeout(function(){t(".style-editor."+s).fadeIn(200)},200))})},e.activateDeleteButtons=function(){t(".custom-styles-tab .styles-list .style-delete, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-delete").click(function(e){var s=t(e.currentTarget),l=s.attr("class").split(" ")[1],i=window.slideshow_jquery_image_gallery_backend_script_generalSettings,o="Are you sure you want to delete this custom style?";void 0!==l&&("object"==typeof i&&"object"==typeof i.localization&&void 0!==i.localization.confirmDeleteMessage&&i.localization.confirmDeleteMessage.length>0&&(o=i.localization.confirmDeleteMessage),confirm(o)&&(t(".custom-styles-tab .style-editors .style-editor."+l).remove(),s.closest("li").remove()))})},e.getHighestCustomStyleID=function(){var e=0;return t(".custom-styles-tab .style-editors .style-editor").each(function(s,l){var i=parseInt(t(l).attr("class").split("_").pop(),10);i>e&&(e=i)}),parseInt(e,10)},t(document).bind("slideshowBackendReady",e.init),e}();
slideshow_jquery_image_gallery_backend_script.editSlideshow=function(){var i=jQuery,e={};return e.isCurrentPage=!1,e.init=function(){"slideshow"===window.pagenow&&(e.isCurrentPage=!0,e.activateSettingsVisibilityDependency())},e.activateSettingsVisibilityDependency=function(){i(".depends-on-field-value").each(function(t,n){var s=i(n),a=s.attr("class").split(" "),o=s.closest("tr");i('input[name="'+a[1]+'"]:checked').val()==a[2]?o.show():o.hide(),i('input[name="'+a[1]+'"]').change(a,function(t){var n=i("."+a[3]).closest("tr");i(t.currentTarget).val()==a[2]?e.animateElementVisibility(n,!0):e.animateElementVisibility(n,!1)})})},e.animateElementVisibility=function(e,t){var n=i(e);void 0===t&&(n.stop(!0,!0),t=!n.is(":visible")),t?(n.stop(!0,!0).show().css("background-color","#c0dd52"),setTimeout(function(){n.stop(!0,!0).animate({"background-color":"transparent"},1500)},500)):(n.stop(!0,!0).css("background-color","#d44f6e"),setTimeout(function(){n.stop(!0,!0).hide(1500,function(){n.css("background-color","transparent")})},500))},i(document).bind("slideshowBackendReady",e.init),e}();
slideshow_jquery_image_gallery_backend_script.editSlideshow.slideManager=function(){var e=jQuery,t={};return t.uploader=null,t.init=function(){slideshow_jquery_image_gallery_backend_script.editSlideshow.isCurrentPage&&(t.activateUploader(),t.activate(),t.activeOldUploader())},t.activateUploader=function(){e(".slideshow-insert-image-slide").on("click",function(e){e.preventDefault();var i,l;return t.uploader?(t.uploader.open(),void 0):(l=window.slideshow_jquery_image_gallery_backend_script_editSlideshow,i="","object"==typeof l&&"object"==typeof l.localization&&void 0!==l.localization.uploaderTitle&&l.localization.uploaderTitle.length>0&&(i=l.localization.uploaderTitle),t.uploader=wp.media.frames.slideshow_jquery_image_galler_uploader=wp.media({frame:"select",title:i,multiple:!0,library:{type:"image"}}),t.uploader.on("select",function(){var e,i,l=t.uploader.state().get("selection").toJSON();for(i in l)l.hasOwnProperty(i)&&(e=l[i],t.insertImageSlide(e.id,e.title,e.description,e.url,e.alt))}),t.uploader.open(),void 0)})},t.activeOldUploader=function(){var i=e("#slideshow-slide-inserter-popup"),l=e("#slideshow-slide-inserter-popup-background"),s=i.find("#search");l.height(e(document).outerHeight(!0)),i.css({top:parseInt(e(window).height()/2-i.outerHeight(!0)/2,10),left:parseInt(e(window).width()/2-i.outerWidth(!0)/2,10)}),s.focus(),t.getSearchResults(),i.find("#close").click(t.closePopup),l.click(t.closePopup),i.find("#search-submit").click(t.getSearchResults),s.keypress(function(e){13==e.which&&(e.preventDefault(),t.getSearchResults())}),e("#slideshow-insert-image-slide").click(function(){i.css({display:"block"}),l.css({display:"block"})}),e("#slideshow-insert-text-slide").click(t.insertTextSlide),e("#slideshow-insert-video-slide").click(t.insertVideoSlide),e(".slideshow-delete-slide").click(function(i){t.deleteSlide(e(i.currentTarget).closest(".sortable-slides-list-item"))})},t.activate=function(){t.indexSlidesOrder(),e(".sortable-slides-list").sortable({revert:!0,placeholder:"sortable-placeholder",forcePlaceholderSize:!0,stop:function(){t.indexSlidesOrder()},cancel:"input, select, textarea"}),e(".wp-color-picker-field").wpColorPicker({width:234}),e(".open-slides-button").on("click",function(t){t.preventDefault(),e(".sortable-slides-list .sortable-slides-list-item").each(function(t,i){var l=e(i);l.find(".inside").is(":visible")||l.find(".handlediv").trigger("click")})}),e(".close-slides-button").on("click",function(t){t.preventDefault(),e(".sortable-slides-list .sortable-slides-list-item").each(function(t,i){var l=e(i);l.find(".inside").is(":visible")&&l.find(".handlediv").trigger("click")})})},t.deleteSlide=function(e){var t="Are you sure you want to delete this slide?",i=window.slideshow_jquery_image_gallery_backend_script_editSlideshow;"object"==typeof i&&"object"==typeof i.localization&&void 0!==i.localization.confirm&&i.localization.confirm.length>0&&(t=i.localization.confirm),confirm(t)&&e.remove()},t.indexSlidesOrder=function(){e(".sortable-slides-list .sortable-slides-list-item").each(function(t,i){e.each(e(i).find("input, select, textarea"),function(i,l){var s=e(l),n=s.attr("name");void 0===n||n.length<=0||(n=n.replace(/[\[\]']+/g," ").split(" "),s.attr("name",n[0]+"["+(t+1)+"]["+n[2]+"]"))})})},t.getSearchResults=function(i){var l=e("#slideshow-slide-inserter-popup"),s=l.find("#results"),n=[];i=parseInt(i,10),isNaN(i)&&(i=0,s.html("")),e.each(s.find(".result-table-row"),function(t,i){n.push(parseInt(e(i).attr("data-attachment-id"),10))}),e.post(window.ajaxurl,{action:"slideshow_slide_inserter_search_query",search:l.find("#search").attr("value"),offset:i,attachmentIDs:n},function(i){var l;s.append(i),s.find(".insert-attachment").unbind("click").click(function(i){var l=e(i.currentTarget).closest("tr");t.insertImageSlide(l.attr("data-attachment-id"),l.find(".title").text(),l.find(".description").text(),l.find(".image img").attr("src"),l.find(".title").text())}),l=e(".load-more-results"),l&&l.click(function(i){var l=e(i.currentTarget),s=l.attr("data-offset");l.closest("tr").hide(),isNaN(parseInt(s,10))||t.getSearchResults(s)})})},t.insertImageSlide=function(i,l,s,n,a){var d=e(".image-slide-template").find(".sortable-slides-list-item").clone(!0,!0);d.find(".attachment").attr("src",n),d.find(".attachment").attr("title",l),d.find(".attachment").attr("alt",a),d.find(".title").attr("value",l),d.find(".description").html(s),d.find(".alternativeText").attr("value",a),d.find(".postId").attr("value",i),d.find(".title").attr("name","slides[0][title]"),d.find(".titleElementTagID").attr("name","slides[0][titleElementTagID]"),d.find(".description").attr("name","slides[0][description]"),d.find(".descriptionElementTagID").attr("name","slides[0][descriptionElementTagID]"),d.find(".url").attr("name","slides[0][url]"),d.find(".urlTarget").attr("name","slides[0][urlTarget]"),d.find(".alternativeText").attr("name","slides[0][alternativeText]"),d.find(".noFollow").attr("name","slides[0][noFollow]"),d.find(".type").attr("name","slides[0][type]"),d.find(".postId").attr("name","slides[0][postId]"),e(".sortable-slides-list").prepend(d),t.indexSlidesOrder()},t.insertTextSlide=function(){var i=e(".text-slide-template").find(".sortable-slides-list-item").clone(!0,!0);i.find(".title").attr("name","slides[0][title]"),i.find(".titleElementTagID").attr("name","slides[0][titleElementTagID]"),i.find(".description").attr("name","slides[0][description]"),i.find(".descriptionElementTagID").attr("name","slides[0][descriptionElementTagID]"),i.find(".textColor").attr("name","slides[0][textColor]"),i.find(".color").attr("name","slides[0][color]"),i.find(".url").attr("name","slides[0][url]"),i.find(".urlTarget").attr("name","slides[0][urlTarget]"),i.find(".noFollow").attr("name","slides[0][noFollow]"),i.find(".type").attr("name","slides[0][type]"),i.find(".color, .textColor").wpColorPicker(),e(".sortable-slides-list").prepend(i),t.indexSlidesOrder()},t.insertVideoSlide=function(){var i=e(".video-slide-template").find(".sortable-slides-list-item").clone(!0,!0);i.find(".videoId").attr("name","slides[0][videoId]"),i.find(".showRelatedVideos").attr("name","slides[0][showRelatedVideos]"),i.find(".type").attr("name","slides[0][type]"),e(".sortable-slides-list").prepend(i),t.indexSlidesOrder()},t.closePopup=function(){e("#slideshow-slide-inserter-popup, #slideshow-slide-inserter-popup-background").css({display:"none"})},e(document).bind("slideshowBackendReady",t.init),t}();
slideshow_jquery_image_gallery_backend_script.shortcode=function(){var e=jQuery,o={};return o.init=function(){o.activateShortcodeInserter()},o.activateShortcodeInserter=function(){e(".insertSlideshowShortcodeSlideshowInsertButton").click(function(){var o="No slideshow selected.",t="slideshow_deploy",i=parseInt(e("#insertSlideshowShortcodeSlideshowSelect").val(),10),d=window.slideshow_jquery_image_gallery_backend_script_shortcode;return"object"==typeof d&&("object"==typeof d.data&&void 0!==d.data.shortcode&&d.data.shortcode.length>0&&(t=d.data.shortcode),"object"==typeof d.localization&&void 0!==d.localization.undefinedSlideshow&&d.localization.undefinedSlideshow.length>0&&(o=d.localization.undefinedSlideshow)),isNaN(i)?(alert(o),!1):(send_to_editor("["+t+" id='"+i+"']"),tb_remove(),!0)}),e(".insertSlideshowShortcodeCancelButton").click(function(){return tb_remove(),!1})},e(document).bind("slideshowBackendReady",o.init),o}();